-- Generated by Oracle SQL Developer Data Modeler 19.4.0.350.1424
--   at:        2020-11-10 12:08:36 BRST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g

/* 
SASSO

Pedro Dib RM: 84735
Antonio Sassine Mendonça RM: 84297
*/

/* 
DROP TABLE t_ano CASCADE CONSTRAINTS;
DROP TABLE t_apresentacao CASCADE CONSTRAINTS;
DROP TABLE t_introducao CASCADE CONSTRAINTS;
DROP TABLE t_item CASCADE CONSTRAINTS;
DROP TABLE t_personagem CASCADE CONSTRAINTS;
DROP TABLE t_posse CASCADE CONSTRAINTS;
*/

CREATE TABLE t_ano (
    nr_ano     NUMBER(4) NOT NULL,
    ds_ano_pt  VARCHAR2(700 CHAR) NOT NULL,
    ds_ano_en  VARCHAR2(700 CHAR) NOT NULL,
    url_foto   VARCHAR2(500 CHAR) NOT NULL UNIQUE
);

ALTER TABLE t_ano ADD CONSTRAINT t_ano_pk PRIMARY KEY ( nr_ano );

CREATE TABLE t_apresentacao (
    t_item_id_item  NUMBER(5) NOT NULL,
    t_ano_nr_ano    NUMBER(4) NOT NULL
);

ALTER TABLE t_apresentacao ADD CONSTRAINT pk_apresentacao PRIMARY KEY ( t_item_id_item,
                                                                        t_ano_nr_ano );

CREATE TABLE t_introducao (
    t_ano_nr_ano                NUMBER(4) NOT NULL,
    t_personagem_id_personagem  NUMBER(5) NOT NULL
);

ALTER TABLE t_introducao ADD CONSTRAINT pk_introducao PRIMARY KEY ( t_ano_nr_ano,
                                                                    t_personagem_id_personagem );

CREATE TABLE t_item (
    id_item     NUMBER(5) NOT NULL,
    nm_item_pt  VARCHAR2(160 CHAR) NOT NULL,
    ds_item_pt  VARCHAR2(2000 CHAR) NOT NULL,
    url_foto    VARCHAR2(500 CHAR) NOT NULL UNIQUE,
    nm_item_en  VARCHAR2(160 CHAR) NOT NULL,
    ds_item_en  VARCHAR2(2000) NOT NULL
);

ALTER TABLE t_item ADD CONSTRAINT t_item_pk PRIMARY KEY ( id_item );

CREATE TABLE t_personagem (
    id_personagem     NUMBER(5) NOT NULL,
    nm_personagem     VARCHAR2(160 CHAR) NOT NULL,
    ds_personagem_en  VARCHAR2(2000 CHAR) NOT NULL,
    ds_personagem_pt  VARCHAR2(2000 CHAR) NOT NULL,
    url_foto          VARCHAR2(500) NOT NULL UNIQUE,
    ano_nascimento NUMBER(4) NOT NULL
);

ALTER TABLE t_personagem ADD CONSTRAINT t_personagem_pk PRIMARY KEY ( id_personagem );

CREATE TABLE t_posse (
    t_personagem_id_personagem  NUMBER(5) NOT NULL,
    t_item_id_item              NUMBER(5) NOT NULL
);

ALTER TABLE t_posse ADD CONSTRAINT pk_posse PRIMARY KEY ( t_personagem_id_personagem,
                                                          t_item_id_item );

ALTER TABLE t_apresentacao
    ADD CONSTRAINT fk_apresentacao_ano FOREIGN KEY ( t_ano_nr_ano )
        REFERENCES t_ano ( nr_ano );

ALTER TABLE t_apresentacao
    ADD CONSTRAINT fk_apresentacao_item FOREIGN KEY ( t_item_id_item )
        REFERENCES t_item ( id_item );

ALTER TABLE t_introducao
    ADD CONSTRAINT fk_introducao_ano FOREIGN KEY ( t_ano_nr_ano )
        REFERENCES t_ano ( nr_ano );

ALTER TABLE t_introducao
    ADD CONSTRAINT fk_introducao_pers FOREIGN KEY ( t_personagem_id_personagem )
        REFERENCES t_personagem ( id_personagem );

ALTER TABLE t_posse
    ADD CONSTRAINT fk_posse_item FOREIGN KEY ( t_item_id_item )
        REFERENCES t_item ( id_item );

ALTER TABLE t_posse
    ADD CONSTRAINT fk_posse_personagem FOREIGN KEY ( t_personagem_id_personagem )
        REFERENCES t_personagem ( id_personagem );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             6
-- CREATE INDEX                             0
-- ALTER TABLE                             12
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
